<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		
		<style type="text/css">
			*{
				margin: 0;
				padding-right: 0;
			}
			
			#box{
				width: 800px;
				height: 400px;
				background-color: lightblue;
				
				margin: auto;
				
				position: relative;
			}
			#box img{
				width: 100%;
				height: 100%;
				
				z-index: 0;
			}
			
		
			#pointBox{
				z-index: 10;
				/*background-color: red;*/
				
				position: absolute;
				bottom: 20px;
				width: 100%;
			}
			#pointBox ul{
				/*background-color: yellow;*/
				overflow: hidden;
				
				text-align: center;
				width: 150px;
				margin: auto;
					
				
			}
			/*点的布局*/
			#pointBox li{
				/*background-color: pink;*/
				float: left;
				
				list-style-type: none;
				
				margin-right: 10px;
				
				cursor: pointer;
			}
			
		</style>
	</head>
	<body>
		<div id="box">
			<img src=""/>
			<div id="pointBox">
				<ul></ul>
			</div>
		</div>
		
		<script type="text/javascript">
			//准备数据
			var images = ['img/slide-1.jpg','img/slide-2.jpg','img/slide-3.jpg','img/slide-4.jpg']
			
			//获取图片标签
			const imgNode = $('#box img')

			//绑定播放位置
			imgNode.index = 0
			imgNode.attr('src', images[0])
			
			//保存当前选中的点
			var currentPointNode = null
			
			//创建点对应的标签
			images.forEach(function(item, x, arr){
				liNode = $('<li style="color: green;">●</li>')
				liNode[0].index = x
				liNode.attr('id', 'li'+x)
				$('#pointBox ul').append(liNode)
				
				//设置第一个圆点的初始状态
				if(x == 0){
					currentPointNode = liNode
					liNode.css('color', 'red')
				}
				
			})
			
			//鼠标进入圆点的时候
			$('#pointBox').on('mouseover', 'li', function(){
				//关闭定时器
				clearInterval(timer)
				imgNode.index = this.index
				console.log('=====:',imgNode, images[this.index])
				//修改样式
				imgNode.attr('src', images[this.index])
				$(this).css('color', 'red')
				
				currentPointNode.css('color', 'green')
				currentPointNode = $(this)
				
				
			})
			
			//鼠标离开圆点事件
			$('#pointBox').on('mouseleave', 'li', function(){
				timer = startMove()
			})
			
			
			//自己动
			function startMove(){
				var t1 = setInterval(function(){
					//切换图片
					imgNode.index += 1
					if(imgNode.index >= images.length){
						imgNode.index = 0
					}
					
					imgNode.attr('src', images[imgNode.index])
					
					//切换点的状态
					let tLiNode = $('#li'+imgNode.index)
					tLiNode[0].index = imgNode.index
					tLiNode.css('color', 'red')
					currentPointNode.css('color', 'green')
					currentPointNode = tLiNode
					
					
				}, 1000)
				
				return t1
			}
			timer = startMove()
			
		</script>
		
	</body>
</html>
